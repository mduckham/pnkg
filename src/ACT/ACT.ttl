@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix pa: <http://linked.data.gov.au/def/placenames/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix sf: <http://www.opengis.net/ont/sf#> .
@prefix geo: <http://www.opengis.net/ont/geosparql#> .
@prefix loci: <http://linked.data.gov.au/def/loci#> .
@prefix gkl_gaz: <http://example.com/ns/gazetteer#> .
# @prefix fnml: <http://semweb.mmlab.be/ns/fnml#> .
# @prefix fno:  <https://w3id.org/function/ontology#> .
# @prefix grel:    <http://users.ugent.be/~bjdmeest/function/grel.ttl#> .
@base <http://example.com/ns#>.

<#SitesSource> a rml:LogicalSource ;
    rml:source "./data/ACT/ACT_241206.csv" ;
    rml:referenceFormulation ql:CSV ;
    rml:iterator "$"

    # rml:source "./data/ACT/ACT_241206.json" ;
    # rml:referenceFormulation ql:JSONPath ;
    # rml:iterator "$.[*]"
.

# triples map
<#SitesPlaceMapping> a rr:TriplesMap ;
    rml:logicalSource <#SitesSource> ;
    rr:subjectMap [
        rr:template "http://example.com/ns/Place/{AUTH_ID}";
        rr:class pa:Place, geo:Feature;
    ] ;
    #place identifier
    rr:predicateObjectMap [
        rr:predicate dcterms:identifier ;
        rr:objectMap [
            rml:reference "AUTH_ID"
        ]
    ] ;
    # geometry
    rr:predicateObjectMap [
        rr:predicate geo:hasGeometry ;
        rr:objectMap [
            rr:template "http://example.com/ns/Geometry/point/{AUTH_ID}"
        ]
    ] ;
    # place classification
    rr:predicateObjectMap [
        rr:predicate pa:hasPlaceClassification ;
        rr:objectMap [
            rr:template "http://pid.geoscience.gov.au/def/voc/ga/PlaceType/{CATEGORY}"
        ]
    ] ;
    
    #link to place name 
    rr:predicateObjectMap [
        rr:predicate pa:hasPlaceName ;
        rr:objectMap [
            rr:template "http://example.com/ns/PlaceName/{AUTH_ID}"
        ]
    ] ;
.

<#GeometryMapping> a rr:TriplesMap ;
    rml:logicalSource <#SitesSource> ;
    
    rr:subjectMap [
        rr:template "http://example.com/ns/Geometry/point/{AUTH_ID}";
        rr:class geo:Geometry;
    ] ;

    rr:predicateObjectMap [
        rr:predicate geo:asWKT ;
        rr:objectMap [
            rml:reference "geometry";
            rr:datatype geo:wktLiteral;
        ]
    ] ;
.

<#PlaceNameMapping> a rr:TriplesMap ;
    rml:logicalSource <#SitesSource> ;
    rr:subjectMap [
        rr:template "http://example.com/ns/PlaceName/{AUTH_ID}" ;
        rr:class pa:OfficialPlaceName, pa:PlaceName ;
    ] ;

    rr:predicateObjectMap [
        rr:predicate loci:isMemberOf ;
        rr:objectMap [
            rr:constant gkl_gaz:Australian_Capital_Territory;
            ]
    ];

    rr:predicateObjectMap [
        rr:predicate pa:dateGazetted ;
        rr:objectMap [
            rml:reference "SUPPLY_DATE" ;
            rr:datatype xsd:dateTime;
        ]
    ] ;

    rr:predicateObjectMap [
        rr:predicate pa:name ;
        rr:objectMap [
            rml:reference "NAME"
        ]
    ] ;
    rr:predicateObjectMap [
        rr:predicate pa:status ;
        rr:objectMap [
            rr:constant pa:gazetted;
        ]
    ] ;
    rr:predicateObjectMap [
        rr:predicate pa:wasNamedBy ;
        rr:objectMap [
            rr:constant gkl_gaz:Office_of_the_Surveyor_General_and_Land_Information;
        ]
    ]
.



