@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix pa: <http://linked.data.gov.au/def/placenames/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix sf: <http://www.opengis.net/ont/sf#> .
@prefix geo: <http://www.opengis.net/ont/geosparql#> .
@prefix loci: <http://linked.data.gov.au/def/loci#> .
@prefix gkl_gaz: <http://example.com/ns/gazetteer#> .
@base <http://example.com/ns#>.

<#SitesSource> a rml:LogicalSource ;
    rml:source "./ogc_json/Victoria/VIC_241115_Roads_with_wkt.csv" ;
    rml:referenceFormulation ql:CSV ;
.

# triples map
<#SitesPlaceMapping> a rr:TriplesMap ;
    rml:logicalSource <#SitesSource> ;
    rr:subjectMap [
        rr:template "http://example.com/ns/Road/{Name Id}";
        rr:class pa:Place, geo:Feature;
    ] ;
    #place identifier
    rr:predicateObjectMap [
        rr:predicate dcterms:identifier ;
        rr:objectMap [
            rml:reference "Name Id"
        ]
    ] ;
    # geometry
    rr:predicateObjectMap [
        rr:predicate geo:hasGeometry ;
        rr:objectMap [
            rr:template "http://example.com/ns/Geometry/point/{Name Id}"
        ]
    ] ;
    # place classification
    # rr:predicateObjectMap [
    #     rr:predicate pa:hasPlaceClassification ;
    #     rr:objectMap [
    #         rr:template "http://pid.geoscience.gov.au/def/voc/ga/PlaceType/{feature_category}"
    #     ]
    # ] ;
    rr:predicateObjectMap [
        rr:predicate pa:hasPlaceClassification ;
        rr:objectMap [
            rr:template "http://pid.geoscience.gov.au/def/voc/ga/PlaceType/{Feature Type}"
        ]
    ] ;
    # rr:predicateObjectMap [
    #     rr:predicate pa:hasPlaceClassification ;
    #     rr:objectMap [
    #         rr:template "http://pid.geoscience.gov.au/def/voc/ga/PlaceType/{feature_sub_type}"
    #     ]
    # ] ;
    #link to place name 
    rr:predicateObjectMap [
        rr:predicate pa:hasPlaceName ;
        rr:objectMap [
            rr:template "http://example.com/ns/PlaceName/{Name Id}"
        ]
    ] ;
.

<#GeometryMapping> a rr:TriplesMap ;
    rml:logicalSource <#SitesSource> ;
    
    rr:subjectMap [
        rr:template "http://example.com/ns/Geometry/point/{Name Id}";
        rr:class geo:Geometry;
    ] ;

    rr:predicateObjectMap [
        rr:predicate geo:asWKT ;
        rr:objectMap [
            rml:reference "WKT";
            rr:datatype geo:wktLiteral;
        ]
    ] ;
.

<#PlaceNameMapping> a rr:TriplesMap ;
    rml:logicalSource <#SitesSource> ;
    rr:subjectMap [
        rr:template "http://example.com/ns/PlaceName/{Name Id}" ;
        rr:class pa:OfficialPlaceName, pa:PlaceName ;
    ] ;
    rr:predicateObjectMap [
        rr:predicate loci:isMemberOf ;
        rr:objectMap[
            rr:IRI gkl_gaz:gazetteer_sa;
        ]
    ] ;
    rr:predicateObjectMap [
        rr:predicate pa:dateGazetted ;
        rr:objectMap [
            rml:reference "Gazette Published date" ;
            rr:datatype xsd:dateTime;
        ]
    ] ;
    rr:predicateObjectMap [
        rr:predicate pa:name ;
        rr:objectMap [
            rml:reference "Place Name"
        ]
    ] ;
    rr:predicateObjectMap [
        rr:predicate pa:status ;
        rr:objectMap [
            rr:constant pa:gazetted;
        ]
    ] ;
    rr:predicateObjectMap [
        rr:predicate pa:wasNamedBy ;
        rr:objectMap [
            rr:IRI gkl_gaz:Department_for_Transport_and_Planning_VIC;
        ]
    ]
.



