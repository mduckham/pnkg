@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix pa: <http://linked.data.gov.au/def/placenames/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix sf: <http://www.opengis.net/ont/sf#> .
@prefix geo: <http://www.opengis.net/ont/geosparql#> .
@prefix loci: <http://linked.data.gov.au/def/loci#> .
@prefix gkl_gaz: <http://example.com/ns/gazetteer#> .
@base <http://example.com/ns#>.

<#SitesSource> a rml:LogicalSource ;
    # rml:source "./data/QLD/QSC_sample_Extracted_Data_20241116_091529762538-17764/QSC_sample_Place_names_gazetteer_wkt.json" ;
    rml:source "./data/QLD/QSC_Extracted_Data_20241116_091529762538-17764/Place_names_gazetteer_wkt.json";
    rml:referenceFormulation ql:JSONPath ;
    rml:iterator "$.[*]"
.

# triples map
<#SitesPlaceMapping> a rr:TriplesMap ;
    rml:logicalSource <#SitesSource> ;
    rr:subjectMap [
        rr:template "http://example.com/ns/Place/{ref_no}";
        rr:class pa:Place, geo:Feature;
    ] ;
    #place identifier
    rr:predicateObjectMap [
        rr:predicate dcterms:identifier ;
        rr:objectMap [
            rml:reference "ref_no"
        ]
    ] ;
    # geometry
    rr:predicateObjectMap [
        rr:predicate geo:hasGeometry ;
        rr:objectMap [
            rr:template "http://example.com/ns/Geometry/point/{ref_no}"
        ]
    ] ;
    # place classification
    rr:predicateObjectMap [
        rr:predicate pa:hasPlaceClassification ;
        rr:objectMap [
            rr:template "http://pid.geoscience.gov.au/def/voc/ga/PlaceType/{type}"
        ]
    ] ;

    #link to place name 
    rr:predicateObjectMap [
        rr:predicate pa:hasPlaceName ;
        rr:objectMap [
            rr:template "http://example.com/ns/PlaceName/{ref_no}"
        ]
    ] ;
.

<#GeometryMapping> a rr:TriplesMap ;
    rml:logicalSource <#SitesSource> ;
    
    rr:subjectMap [
        rr:template "http://example.com/ns/Geometry/point/{ref_no}";
        rr:class geo:Geometry;
    ] ;

    rr:predicateObjectMap [
        rr:predicate geo:asWKT ;
        rr:objectMap [
            rml:reference "geometry";
            rr:datatype geo:wktLiteral;
        ]
    ] ;
.

<#PlaceNameMapping> a rr:TriplesMap ;
    rml:logicalSource <#SitesSource> ;
    rr:subjectMap [
        rr:template "http://example.com/ns/PlaceName/{ref_no}" ;
        rr:class pa:OfficialPlaceName, pa:PlaceName ;
    ] ;
    rr:predicateObjectMap [
        rr:predicate loci:isMemberOf ;
        rr:objectMap [
            rr:constant gkl_gaz:Queensland_Government;
        ]
    ] ;
    rr:predicateObjectMap [
        rr:predicate pa:dateGazetted ;
        rr:objectMap [
            rml:reference "gazetted_d" ;
            rr:datatype xsd:dateTime;
        ]
    ] ;
    rr:predicateObjectMap [
        rr:predicate pa:name ;
        rr:objectMap [
            rml:reference "place_name"
        ]
    ] ;
    rr:predicateObjectMap [
        rr:predicate pa:status ;
        rr:objectMap [
            rr:constant pa:gazetted;
        ]
    ] ;
    rr:predicateObjectMap [
        rr:predicate pa:wasNamedBy ;
        rr:objectMap [
            rr:constant gkl_gaz:Queensland_Government;
        ]
    ]
.

# java -jar /Users/alexis/Documents/04_Code/semadaten/lib/rmlmapper-7.1.2-r374-all.jar -m /Users/alexis/Documents/04_Code/semadaten/src/QLD/pts.ttl -o /Users/alexis/Documents/04_Code/semadaten/out/QLD.rdf -s turtle
